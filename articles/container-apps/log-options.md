---
title: Log storage and monitoring opy=tions in Azure Container Apps
description: Description of logging options in Azure Container Apps
services: container-apps
author: cebundy
ms.service: container-apps
ms.topic: conceptual
ms.date: 09/29/2022
ms.author: v-bcatherine
---

# Log storage and monitoring options in Azure Container Apps

Azure Container Apps gives you options for storing and monitoring your log data.  The storage options allow you to choose where and how long your data is stored.  You can select between monitoring solutions, such as Azure Monitor Log Analytics, or a partner solution.  This article describes the options available to you.

Container Apps log data consists these categories:

- Container console output (stdout/stderr).
- System logs generated by the Azure Container Apps service.

You can choose between these logging options:

- **Log Analytics**: Log Analytics is the default storage and monitoring option.  Your logs are stored in a Log Analytics workspace in your Container Apps environment and are viewed through Log Analytics queries.  To learn more about Log Analytics, see [Azure Monitor Log Analytics](log-monitoring.md).
- **Azure Monitor**: Log Monitor collects the data, and then streams you select.  You can choose to:
    - send your logs to a Log Analytics workspace.
    - archive your logs to a storage account.
    - stream your logs to an event hub. For more information, see [Azure Event Hubs](../event-hubs/event-hubs-about.md).
    - send your logs to a partner monitoring solution such as, Datadog, Elastic, Logz.io and others.  For more information, see [Partner solutions](../partner-solutions/overview.md).
- **None**: You can disable the storage of log data. You'll still be able to view current container console log data via the **Logs stream** feature in your container app.  For more information, see [Log streaming](log-streaming.md).

## Configure options via the Azure portal


TODO: Need to verify steps and get screenshots.

To configure the logging options for your Container Apps environment in the Azure portal:

1. Navigate to the **Logging Options** on your Container Apps environment page.
2. Select **Logs Destination** to choose where your log data is stored.  You can choose from the following options:

    - **Log Analytics**: When you select this option, you'll be prompted to select an existing Log Analytics workspace or create a new one.  Log Analytics is the default option.
    - **Azure Monitor**:  When you select this option, a message directs you to configure your log destination details via the **Diagnostic settings** in your container app page.
    - **None**:  This option disables the storage of log data.

### Diagnostic settings

TODO: Need to verify steps and get screenshots.

When you select **Azure Monitor** as your logs destination, you must configure the destination details. Select **Diagnostic settings** from the left side menu of your container app page.

Destination details are saved as *diagnostic settings* objects.  You can create multiple *diagnostic settings* objects for your container app. You can configure different log categories for each *diagnostic setting*. For example, create one *diagnostic setting* to send the system logs category to one destination, and another to send the container console logs category to another destination.

You can choose from the following **Destination details**:

- **Send to Log Analytics workspace**:  Select from the Log Analytics workspaces that are available in your subscription or create a new one.
- **Archive to a storage account**:  You can choose from the storage accounts that are available in your subscription or create a new one.  You can select the period of time that you want to retain your logs.
- **Stream to an event hub**:  Select from the event hubs that are available in your subscription or create a new one.  
- **Send to a partner solution**: Select from the list of available partner solutions.  

For more information about Diagnostic settings, see [Diagnostic settings in Azure Monitor](../azure-monitor/essentials/diagnostic-settings.md).

## Configure options Azure CLI

Configure the logs destination for your Container Apps environment with the Azure CLI `az containerapp create` and `az containerapp update` commands with the `--logs-destination` argument.  The destination values are: `log-analytics`, `azure-monitor`, and `none`.
For example, to create a Container Apps environment with Log Analytics as the logs destination:

TODO: Finish example.  Mike/Anthony, can you provide the CLI command arguments?  Do I need to add 

```azurecli
az containerapp env create \
  --name myContainerAppEnv \
  --resource-group myResourceGroup \
  --logs-destination log-analytics
```

To update an existing Container Apps environment to use Azure Monitor as the logs destination:

```azurecli
az containerapp env update \
  --name myContainerAppEnv \
  --resource-group myResourceGroup \
  --logs-destination azure-monitor
  
```

When the "logs destination" is set to either `azure-monitor` or `log-analytics`, create diagnostic settings to configure the destination details for the log categories with the `az monitor diagnostics-settings` command.  For more information about Azure Monitor diagnostic settings commands, see [az monitor diagnostic-settings](/cli/azure/monitor/diagnostic-settings).  Container Apps log categories are `ContainerAppConsoleLogs` and `ContainerAppSystemLogs`.

TODO: Finish example.  Mike/Anthony, can you provide the CLI command arguments?  Do I need to add more example.  Is the information correct for the logs parameter?

```azurecli
For example, to create a diagnostic setting to send the container console logs category to a storage account:

```azurecli
az monitor diagnostic-settings create \
  --name my-diagnostics-setting \
  --resource myContainerAppEnv \
  --storage-account myStorageAccount \
  --logs  '[
     {
       "category": "ContainerAppConsoleLogs",
       "enabled": true,
       "retentionPolicy": {
         "enabled": true,
         "days": 0
       }
     }
   ]'
```

## Next steps

> [!div class="nextstepaction"]
> [Monitor logs with Log Analytics](log-monitoring.md)
