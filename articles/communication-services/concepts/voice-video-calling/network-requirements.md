---
title: Prepare your organization's network for Azure Communication Services
titleSuffix: An Azure Communication Services concept document
description: Learn aboUnderstand the network requirements for Azure Commumnication Service Voice and Video Calling
author: mikben
manager: jken
services: azure-communication-services

ms.author: nmurav
ms.date: 3/14/2021
ms.topic: overview
ms.service: azure-communication-services
---


# Planning for Media Quality in Azure Communication Services

This article explains the factors that affects the media quality and provides the guidance how to monitor your solution to ensure the best possible quality.

## Factors that affect media quality and reliability

There are many different factors that contribute to Azure Communication Services  Real-Time media (audio, video, and application sharing) quality that include the devices that are used, the environment, and the network connectivity.


### Network quality

The quality of the Real-Time media over IP network is greatly impacted by the quality of the network connectivity, but especially by the amount of:
* Latency This is the time it takes to get an IP packet from point A to point B on the network. This network propagation delay is essentially tied to physical distance between the two points and the speed of light, including additional overhead taken by the various routers in between. Latency is measured as one-way or Round-trip Time (RTT).
* Packet Loss A percentage of packets that are lost in a given window of time. Packet loss directly affects audio qualityâ€”from small, individual lost packets having almost no impact, to back-to-back burst losses that cause complete audio cut-out.
* Inter-packet arrival jitter or simply jitter This is the average change in delay between successive packets. Azure Communication Services  can adapt to some levels of jitter through buffering. It's only when the jitter exceeds the buffering that a participant will notice the effects of jitter.

### Network bandwidth

With many concurrent Azure Communication Services media sessions, as well as other network traffic generated by other services and business applications, making sure that there is sufficient bandwidth over the entire network path that connects your network to the Azure Communication Services is critical to avoid network congestion and ensure excellent media Real-Time media (audio, video, and application sharing) quality.

_Bandwidth requirements for Azure Communication Services _


### Firewall (s) configuration.

The Azure Communication Services connection requires internet connectivity to specific ports to transmit traffic with high-quality. Azure Communication Services can work if access to all the necessary IP addresses, ports are not open. However, the optimal experience is provided when recommended ports and IP ranges are open.

 | |  |
 |---------|---------|
 |Ports     |UDP ports <strong>3478</strong> through <strong>3481</strong>, TCP ports <strong>443</strong> |
 |IP addresses | [Range of Azure Public Cloud IP Addresses](https://www.microsoft.com/en-us/download/confirmation.aspx?id=56519)     |

### Network optimization

The following tasks are optional and aren't required for rolling out Azure Communication Services. Use this guidance to optimize your network and Azure Communication Services performance or if you know you've got some network limitations.
You might want to do additional network optimization if:
* Azure Communication Services runs slowly (maybe you have insufficient bandwidth)
* Calls keep dropping (might be due to firewall or proxy blockers)
* Calls have static and cut out, or voices sound like robots (could be jitter or packet loss)


Network optimization task | Details
------------ | -------------
Plan your network | In this documentation you can find minimal requirements to your network for calls. You can consult Teams example for planning your network https://docs.microsoft.com/en-us/microsoftteams/tutorial-network-planner-example 
External name resolution | Be sure that all computers running the Azure Communications Services SDKs can resolve external DNS queries to discover the services provided by Azure Communication Servicers and that your firewalls are not preventing access. 
Maintain session persistence | Make sure your firewall doesn't change the mapped Network Address Translation (NAT) addresses or ports for UDP
Validate NAT pool size | Validate the network address translation (NAT) pool size required for user connectivity. When multiple users and devices access Azure Communication Services  using Network Address Translation (NAT) or Port Address Translation (PAT), you need to ensure that the devices hidden behind each publicly routable IP address do not exceed the supported number. Ensure that adequate public IP addresses are assigned to the NAT pools to prevent port exhaustion. Port exhaustion will contribute to internal users and devices being unable to connect to the Azure Communication Services
Intrusion Detection and Prevention Guidance | If your environment has an Intrusion Detection or Prevention System (IDS/IPS) deployed for an extra layer of security for outbound connections, be sure to allow all Azure Communication Services URLs
Configure split-tunnel VPN | We recommend that you provide an alternate path for Teams traffic that bypasses the virtual private network (VPN), commonly known as split-tunnel VPN. Split tunneling means that traffic for Azure Communications Services  doesn't go through the VPN but instead goes directly to Azure. Bypassing your VPN will have a positive impact on  media quality, and it reduces load from the VPN devices and the organization's network. To implement a split-tunnel VPN, work with your VPN vendor. Other reasons why we recommend bypassing the VPN: * VPNs are typically not designed or configured to support real-time media. *	Some VPNs might also not support UDP (which is required for Azure Communication Services). *	VPNs also introduce an extra layer of encryption on top of media traffic that's already encrypted. *	Connectivity to Azure Communication Services might not be efficient due to hair-pinning traffic through a VPN device.






