---
title: How to integrate with farm operations data provider
description: Learn how to integrate with farm operations data provider
author: lbpudi
ms.author: lbethapudi
ms.service: data-manager-for-agri
ms.topic: how-to
ms.date: 07/14/2023
ms.custom: template-how-to
---

# Integrate with Farm Operations Data Provider
Azure Data Manager for Agriculture provides oAuth based authorization to connect your end-users (farmers) with their farm operations data provider (Ex: Climate FieldView). **Configuring oAuth flow is a pre-requisite for integrating with any farm operations data provider** in fetching farm operations data from them. Follow the below steps to be able to successfully integrate with oAuth callback service built by Azure Data Manager for Agriculture.

> [!NOTE]
>
> Step 1 to Step 3 are part of the one-time initial configuration setup. Once integrated, you will be able to enable all your end users to use the existing oAuth workflow and call the config API (Step 4) per user (farmerId) to get access token.

## Step 1: App Creation

If you want to register your Climate FieldView application, go to [FieldView portal](https://dev.fieldview.com/join-us/) and submit the form. Once FieldView processes your request, they'll send your `client_id` and `client_secret`.

## Step 2: Provider Configuration

Use the below `oAuthProvider` API to configure the oAuth provider (Ex: FIELDVIEW) with appropriate credentials of the newly created App. The below API creates or updates an oauthProvider resource.

API documentation: [oAuthProviders - Create Or Update](/rest/api/data-manager-for-agri/dataplane-version2023-07-01-preview/o-auth-providers/create-or-update)


Once the operation is done, you can run the [oAuthProviders_Get](/rest/api/data-manager-for-agri/dataplane-version2023-07-01-preview/o-auth-providers/get) to verify whether the application is registered. 
Now, all the parties created in your Azure Data Manager for Agriculture instance can use FieldView as a provider to fetch farm operations data.

## Step 3: Endpoint Configuration

There is an endpoint that needs to be configured in the next step

**User redirect endpoint**: This endpoint is where you want your users to be redirected to once the oAuth flow is completed. This endpoint will be generated by you and provided to ADMA as `userRedirectLink` in the oauth/tokens/:connect API.
**Register the oAuth callback endpoint with your App on Climate FieldView portal.**

## Step 4: Party (End-user) Integration

When a party (end-user) lands on your webpage where the user action is expected (Ex: Connect to FieldView button), make a call to `oauth/tokens/:connect` API in the below fashion to get the oAuth provider's (Ex: Climate FieldView) sign-in uri back to start the end-user oAuth flow.

API documentation: [oAuthTokens - Get OAuth Connection Link](/rest/api/data-manager-for-agri/dataplane-version2023-07-01-preview/o-auth-providers/get-o-auth-connection-link)

Once the `oauth/tokens/:connect` API successfully returns the `oauthAuthorizationLink`, **end-user clicks on this link to go through the oAuth flow** (Ex: For Climate FieldView, the user will be served a FieldView sign in page). Once the sign in is completed, ADMA will redirect the user to the endpoint provided by customer (`userRedirectLink`) with the following query parameters in the url

1. **status** (success/failure)
2. **state** (optional string to uniquely identify the user at customer end)
3. **message** (optional string)
4. **errorCode** (optional string sent for Failure/error) in the parameters.

> [!NOTE]
>
> If the API returns 404, then it implies the oAuth flow failed and ADMA could not acquire the access token.

## Step 5: Check Access Token Info (Optional) 

This step is optional, only to confirm if for a given user or list of users, the required valid access token has been acquired or not. This can be done via making a call to the `oauth/tokens` API in the below fashion and **check for the entry `isValid: true` in the response body**.

API documentation: [oAuthTokens - List](/rest/api/data-manager-for-agri/dataplane-version2023-07-01-preview/o-auth-tokens/list)

**This step marks the successful completion of the oAuth flow for a user**. Now, the user is all-set to trigger a new [FarmOperationsDataJob](./how-to-ingest-and-egress-farm%20operations%20data.md) to start pulling the farm operations data from Climate FieldView.
