---
title: Smart URL refresh - question answering
titleSuffix: Azure Cognitive Services
description: Use the question answering smart URL refresh feature to keep your knowledge base up to date.
ms.service: cognitive-services
ms.subservice: language-service
author: PatrickFarley
ms.author: pafarley
ms.topic: how-to
ms.date: 02/28/2022
---

# Use smart URL refresh with a project

Custom question answering gives you the capability to refresh knowledge bases (projects) by getting the latest content from a  source URL and updating the corresponding knowledge base with one click. The service will ingest content from the URL and either create, merge, or delete question-and-answer pairs in the knowledge base. This is only applicable to URL sources.

This functionality is provided to support scenarios where the content in the source URL tends to change frequently and users need a simple mechanism to update the knowledge base. THe service will refresh the source and update the knowledge base to the latest content while retaining any manual edits made previously in the knowledge base.

> [!NOTE]
> Refreshing multiple sources at the same time is not supported.

## How it works

If you have a knowledge base with a URL source that has changed, you can trigger a smart URL refresh to keep your knowledge base up to date. The service will scan the contents at the URL and generate new QnA pairs. It will add these to your knowledge base and also delete any pairs that have disappeared from the source (with exceptions&mdash;see below). It also merges old and new QnA pairs in some situations (see below).

You can trigger a URL refresh in Language Studio by opening your project, selecting the source in the **Manage sources** list, and selecting **Refresh URL**.

:::image type="content" source="../media/question-answering/refresh-url.png" alt-text="screenshot of language studio with refresh URL button highlighted.":::

You can also trigger a refresh programmatically using the REST API. See the **[Update Sources](https://docs.microsoft.com/rest/api/cognitiveservices/questionanswering/question-answering-projects/update-sources)** reference documentation for parameters and a sample request.

## Smart refresh behavior

When the user refreshes content using this feature, the knowledge base of QnA pairs may be updated in the following ways:

### Delete old pair
If the content of the URL is updated so that an existing QnA pair generated by the old content of the URL is no longer found in the source, that pair is deleted from the refreshed knowledge base. For example, if a QnA pair Q1A1 existed in the old knowledge base, but after refreshing, there's no A1 answer generated by the newly refreshed source, then the pair Q1A1 is considered outdated and is dropped from the knowledge base altogether.

However, if the old QnA pairs have been manually edited in the authoring portal, they will not be deleted.

### Add new pair

If the content of the URL is updated in a way that a new QnA pair exists, which did not exist in the old KB, then it is added to the KB. For example, if on executing the Refresh URL action, it is found that a new answer A2 can be generated, then the QnA pair Q2A2 is inserted into the KB.

### Merge pairs

If the answer of a new QnA pair matches the answer of an old QnA pair, the two pairs are merged. The new pair's question is added as an alternate question to the old QnA pair. For example, consider Q3A3 exists in the old source. Upon refreshing the source, a new QnA pair Q3'A3 is introduces. In that case, the two QnA pairs are merged: Q3' is added to Q3 as an alternate question. 

If the old QnA pair has a metadata value, that data is retained and persisted in the newly merged pair.
  
If the old QnA pair has follow-up prompts associated with it, then the following scenarios may arise:
* If the prompt attached to the old pair is from the source being refreshed, then it is deleted, and the prompt of the new pair (if any exists) is appended to the newly merged QnA pair.
* If the prompt attached to the old pair is from a different source, then it is maintained as-is and the prompt from the new question (if any exists) is appended to the newly merged QnA pair.


See the following example of a merge operation:

|Source iteration|Question  |Answer  |Prompts  |
|---------|---------|---------|--|
|old |"What is the new HR policy?"     |  "You may have to choose among the following options:"       | P1, P2        |
|new |"What is the new payroll policy?"    |  "You may have to choose among the following options:"    |  P3, P4   |

The prompts P1 and P2 of the old QnA pair are different from prompts P3 and P4 of the new QnA pair. They both have the same answer, `You may have to choose among the following options:`, but it leads to different prompts. In this case the resulting QnA pair would be the following:

|Question  |Answer  |Prompts  |
|---------|---------|--|
|"What is the new HR policy?" </br>(alternate question: "What is the new payroll policy?")    |  "You may have to choose among the following options:"       | P3, P4  |

#### Duplicate answers scenario

When the original source has two or more QnA pairs with the same answer (as in, Q1A1 and Q2A1), the merge behavior may be more complex.

If these two QnA pairs have individual prompts attached to them (for example, Q1A1+P1 and Q2A1+P2), and the refreshed source content has a new QnA pair generated with the same answer A1 and a new prompt P3 (Q1'A1+P3), then the new question will be added as an alternate question to the original pairs (as described above). But all of the original attached prompts will be overwritten by the new prompt. So the final pair set will look like the following:
* Q1 (Q1' as alternate question) A1+P3    
* Q2 (Q1' as alternate question) A1+P3

## Next steps

* [Question answering quickstart](https://docs.microsoft.com/azure/cognitive-services/language-service/question-answering/quickstart/sdk?pivots=studio)
* [Update Sources API reference](https://docs.microsoft.com/rest/api/cognitiveservices/questionanswering/question-answering-projects/update-sources)
