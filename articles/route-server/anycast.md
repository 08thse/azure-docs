---
title: 'Propagating anycast routes to on-premises'
description: Learn about how to advertise the same route from different regions with Azure Route Server.
services: route-server
author: jomore
ms.service: route-server
ms.topic: conceptual
ms.date: 02/03/2022
ms.author: jomore
---

# Anycast routing with Azure Route Server

Azure VMware Solution blah blah

## Topology

Anycast is a routing technology used for multi-region application deployments. It essentially consists of advertising exactly the same IP address from different locations, so that packets from the application users are routed to the closest region with the application. NVAs can 

The following diagram describes two simple hub and spoke topologies, each in a different Azure region. A Network Virtual Appliance (NVA) in each region advertises the same route (`9.9.9.9` in this example, but it could be any other prefix that does not overlap with the Azure and on-premises networks) to the Azure Route Server. The routes will be further propagated to the on-premises networks through ExpressRoute. When application users want to access the application, the DNS infrastructure will resolve the DNS name of the application to the anycast IP address (`9.9.9.9` in the diagram), which the on-premises network will route to one of the regions.


:::image type="content" source="./media/senarios/anycast.png" alt-text="Diagram of anycast with Route Server.":::

The decision of which of the available regions is selected is entirely based on routing attributes. When the routes from both regions are identical, the on-premises network will typically use Equal Cost MultiPathing (ECMP) to send each application flow to each region. It is possible as well to modify the advertisements generated by each NVA in Azure to make one of the regions preferred, for example with BGP AS Path prepending.

> [!IMPORTANT]
> The NVAs advertising the routes should include some health check mechanism to stop advertising the route when the application is not available in their respective regions.


## Next steps

* [Learn how Azure Route Server works with ExpressRoute](expressroute-vpn-support.md)
* [Learn how Azure Route Server works with a network virtual appliance](resource-manager-template-samples.md)
