---
title: 'Multi-region designs with Route Server'
description: Learn about how Azure Route Server enables multi-region designs.
services: route-server
author: jomore
ms.service: route-server
ms.topic: conceptual
ms.date: 02/03/2022
ms.author: jomore
---

# Multi-region networking

Applications that have high availability or disaster recovery requirements often need to be deployed in more than one Azure region, where spoke VNets in multiple regions need to communicate between each other. A possibility to achieve this communication pattern is peering all spokes that need to communicate to each other, but those flows would bypass the firewall. Another possibility is using User Defined routes, but that can be difficult to maintain. Azure Route Server offers an alternative which is very dynamic and adapts to topology changes without manual intervention.

## Topology

The following diagram shows a dual-region architecture, where a hub and spoke topology exists in each region, and the hub VNets are peered to each other.

:::image type="content" source="./media/senarios/multiregion.png" alt-text="Diagram of multi-region design with Route Server.":::

Each NVA learns the prefixes from the local hub and spokes from its Azure Route Server, and will communicate it to the NVA in the other region via BGP. This communication between the NVAs should be established over an encapsulation technology such as IPsec or VXLAN, since otherwise routing loops can occur in the network.

The spokes need to be peered with the hub VNet with the setting "Use Remote Gateways", so that the Route Server advertises their prefixes to the local NVAs, and learnt routes can be programmed for virtual machines in those spokes. 

The NVAs will advertise to their local Route Server the routes that they learnt from the remote region, and Route Server will configure these routes in the local spokes, hence attracting traffic. If there are multiple NVAs in the same region (Route Server supports 8 BGP adjacencies), AS path prepending can be used to make one of the NVAs preferred to the others.

> [!IMPORTANT]
> If VPN or ExpresRoute gateways exist in the same VNet as the Route Server and NVAs, extending the overlay to the on-premises network might be required to satisfy the communication requirements.


## Next steps

* [Learn how Azure Route Server works with ExpressRoute](expressroute-vpn-support.md)
* [Learn how Azure Route Server works with a network virtual appliance](resource-manager-template-samples.md)
