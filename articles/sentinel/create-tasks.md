---
title: Work with incident tasks in Microsoft Sentinel
description: This article describes how to work with incident tasks in Microsoft Sentinel.
author: yelevin
ms.author: yelevin
ms.topic: how-to
ms.date: 11/14/2022
---

# Work with incident tasks in Microsoft Sentinel

This article explains how to create and use incident tasks to standardize analyst workflow processes in Microsoft Sentinel.

Tasks can be created ad-hoc manually from within an incident, or automatically by using either automation rules or playbooks.

> [!IMPORTANT]
>
> The **Incident tasks** feature is currently in **PREVIEW**. See the [Supplemental Terms of Use for Microsoft Azure Previews](https://azure.microsoft.com/support/legal/preview-supplemental-terms/) for additional legal terms that apply to Azure features that are in beta, preview, or otherwise not yet released into general availability.

## Use cases for different roles

The following scenarios are suitable for Tier 1 analysts:

- [View and follow incident tasks](#view-and-follow-incident-tasks)
- [Manually add an ad-hoc task to an incident](#manually-add-an-ad-hoc-task-to-an-incident)

The following scenarios are suitable for SOC managers, senior analysts, and automation engineers:

- [View automation rules with incident task actions](#view-automation-rules-with-incident-task-actions)
- [Add tasks to incidents with automation rules](#add-tasks-to-incidents-with-automation-rules)
- [Add tasks to incidents with playbooks](#add-tasks-to-incidents-with-playbooks)


## Prerequisites

The **Microsoft Sentinel Responder** role is required to create automation rules and to view and edit incidents, both of which are necessary to add, view, and edit tasks.


## View automation rules with incident task actions

In the **Automation** page, you can filter the view of automation rules to see only the ones that have **Add task** actions defined.

:::image type="content" source="media/create-tasks/filter-grid-on-actions.png" alt-text="Screenshot showing how to filter automation rules grid.":::

1. Select the **Actions** filter.

1. Unmark the **Select all** checkbox.

1. Scroll down and mark the **Add task (Preview)** checkbox.

1. Select **OK** and see the results.

    :::image type="content" source="media/create-tasks/filtered-grid-on-actions.png" alt-text="Screenshot showing the results of the filter on the automation rules grid.":::

    These are the automation rules that add tasks to incidents. The **Analytics rule names** column tells you which analytics rules these automation rules are conditioned on, so you'll have a general idea of which incidents are affected.

    > [!NOTE]
    > To have exact knowledge of whether an automation rule will apply to a particular incident, you must open the rule to see if any additional conditions are defined, besides the analytics rule condition. If other conditions are defined, the scope of the affected incidents will be accordingly narrowed.

## Add tasks to incidents with automation rules

1. In the **Automation** page, select **+ Create** and select **Automation rule**.

1. The **Create new automation rule** panel will open on the right side.  
Give your automation rule a name that describes what it does.

1. Select **When incident is created** as the trigger (you can also use **When incident is updated**).

1. Add **Conditions** to determine to which incidents new tasks will be added.

    For example, filter by **Analytics rule name**:

    You may want to add tasks to incidents based on the types of threats detected by an analytics rule or a group of analytics rules, that need to be handled according to a certain workflow. Search for and select the relevant analytics rules from the drop-down list.

    Or, you may want to add tasks that are relevant for incidents across all types of threats (in this case, leave the default selection of **All** as is).

    In either case, you can add more conditions to narrow the scope of incidents to which your automation rule will apply. Learn more about [adding advanced conditions to automation rules](add-advanced-conditions-to-automation-rules.md).

    One thing you'll need to consider is that the order in which tasks appear in your incident is determined by the tasks' creation time. You can set the order of automation rules so that rules that add tasks required for all incidents will run first, and only afterwards any rules that add tasks required for incidents generated by specific analytics rules.

    :::image type="content" source="media/create-tasks/create-new-automation-rule.png" alt-text="Screenshot of first part of automation rule wizard..":::

1. Under **Actions**, select **Add task (preview)**.

    :::image type="content" source="media/create-tasks/add-task-action.png" alt-text="Screenshot of choosing the Add Task action in an automation rule.":::

1. For each task, enter a title in the **Task title** field, and then (optionally) select **+ Add description** to open a description field.  
    Only task titles appear by default in the incident's task list panel. A task's description appears only when the task item is expanded.

    :::image type="content" source="media/create-tasks/add-title-description.png" alt-text="Screenshot showing how to add a title and a description to a task.":::

1. In the description field you can add a free-form description for the task, including images, links and rich-text formatting (See the hyperlinks, numbered lists, and code-block-formatted text in the examples below).

    :::image type="content" source="media/create-tasks/add-task-description.png" alt-text="Screenshot showing how to add a description to a task.":::

1. Add more tasks to the same group of incidents by selecting **+ Add action** and repeating the last three steps.

    Tasks will be created and added to the incident according to the order of the **Add task** actions in your automation rule.

    :::image type="content" source="media/create-tasks/create-more-tasks.png" alt-text="Screenshot showing how to add more tasks to an automation rule.":::

1. Finish creating the automation rule by completing the remaining steps, **Rule expiration** and **Order**, and selecting **Apply** at the end. See [Create and use Microsoft Sentinel automation rules to manage response](create-manage-use-automation-rules.md) for full details.

    Regarding the **Order** setting: The order in which tasks appear in your incidents depends on two things:
    1. The order of execution of the automation rules, as determined by the number in the **Order** setting, and...
    1. The order of the **Add task** actions defined within each automation rule.

## Add tasks to incidents with playbooks

Use the **Add task** action in a playbook (in the Microsoft Sentinel connector) to automatically add a task to the incident that triggered the playbook.

[Follow these instructions](tutorial-respond-threats-playbook.md#create-a-playbook) to create a **playbook** based on the **incident trigger**. (You can use either a Standard workflow or a Consumption workflow.)

There are two ways to work with playbooks to generate tasks:

### Use a playbook to add a task and perform it

In this example we're going to add a playbook action that adds a task to the incident to reset a compromised user's password, and we'll add another playbook action that sends a signal to Azure Active Directory Identity Protection (AADIP) to actually reset the password. Then we'll add a final playbook action to mark the task in the incident complete.

When you're ready to add actions to your playbook, choose the following:

:::image type="content" source="media/create-tasks/playbook-actions.png" alt-text="Screenshot shows list of actions to add to playbook to add and perform tasks.":::

To add these actions, take the following steps:

1. From the **Microsoft Sentinel** connector, add the **Add task to incident (Preview)** action.  
    Choose the **Incident ARM ID** dynamic content item for the **Incident ARM id** field. Enter **Reset user password** as the **Title**.

1. Add the **Entities - Get Accounts (Preview)** action. Add the **Entities** dynamic content item in the **Entities list** field.

    :::image type="content" source="media/create-tasks/add-task-get-entities.png" alt-text="Screenshot shows playbook actions to add task and get incident entities.":::

1. Add a **For each** loop from the **Control** actions library.  
    Add the **Accounts** dynamic content item to the **Select an output from previous steps** field.

1. Inside the **For each** loop, add the **Confirm a risky user as compromised (Preview)** action from the **Azure AD Identity Protection** connector.  
    Add the **Accounts PUID** dynamic content item to the **userIds Item - 1** field.

    This action sets in motion processes inside Azure AD Identity Protection that will reset the user's password.

    :::image type="content" source="media/create-tasks/confirm-compromised.png" alt-text="Screenshot shows sending entities to AADIP to confirm compromise.":::

1. Add the **Mark a task as completed (Preview)** action from the Microsoft Sentinel connector.  
    Add the **Incident task ID** dynamic content item to the **Task ARM id** field.

    :::image type="content" source="media/create-tasks/mark-complete.png" alt-text="Screenshot shows how to add a playbook action to mark an incident task complete.":::

### Use a playbook to add a task conditionally

1. 

## View and follow incident tasks

1. In the **Incidents** page, select an incident from the list, and select **View full details** in the details panel.

1. In the incident details page, select **Tasks (Preview)** from the top banner.

    :::image type="content" source="media/create-tasks/incident-details-screen.png" alt-text="Screenshot shows incident details screen with tasks panel open." lightbox="media/create-tasks/incident-details-screen.png":::

1. A new panel will open on the right side of the screen. You'll see the list of tasks defined for this incident, along with how or by whom it was created - whether manually or by an automation rule or a playbook.

    :::image type="content" source="media/create-tasks/incident-tasks-panel.png" alt-text="Screenshot shows incident tasks panel as seen from incident details page.":::

1. The tasks that have descriptions will be marked with an expansion arrow. Expand a task to see its full description. See how the descriptions appear exactly as entered in the examples above?

    :::image type="content" source="media/create-tasks/incident-tasks-panel-with-descriptions.png" alt-text="Screenshot shows incident tasks panel with expanded task descriptions.":::

1. Mark a task complete by marking the circle next to the task name. A check mark will appear in the circle, and the text of the task will be grayed out. See the "Reset user password" example in the screenshots above.

## Manually add an ad-hoc task to an incident

SOC analysts can add a task for themselves, on the spot, to an incident's task list. This task will apply only to the open incident.

1. Select **+ Add task** from the top of the **Incident tasks (Preview)** panel.

    :::image type="content" source="media/create-tasks/add-task-ad-hoc-1.png" alt-text="Screenshot shows how to manually add a task to your task list.":::

1. Enter a **Title** for your task, and a **Description** if you choose.

    :::image type="content" source="media/create-tasks/add-task-ad-hoc-2.png" alt-text="Screenshot shows how to add a title and description to your task.":::

1. Select **Save** when you've finished.

    :::image type="content" source="media/create-tasks/add-task-ad-hoc-3.png" alt-text="Screenshot shows how to finish defining and save your task.":::

1. See your new task at the bottom of the task list. Note how manually-created tasks have a different color band on the left border, and that your name appears as *Created by:* under the task title.

    :::image type="content" source="media/create-tasks/view-ad-hoc-added-task.png" alt-text="Screenshot showing your new task at the end of the task list.":::

## Next steps

- Learn more about [incident tasks](incident-tasks.md).
- Learn more about [automation rules](automate-incident-handling-with-automation-rules.md) and how to [create them](./create-manage-use-automation-rules.md).
